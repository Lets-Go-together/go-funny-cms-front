(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c24e12ec","chunk-2d0e4e22","chunk-2d21f30b"],{"3c91":function(t,e,n){},4588:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-upload",{staticClass:"image-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,action:t.url,data:t.data,"before-upload":t.beforeUpload},on:{change:t.handleChange}},[t.image?n("img",{attrs:{src:t.image,alt:"image"}}):n("div",[n("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),n("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1)])],1)},r=[],i=n("91b6"),o=n("d988"),u={name:"UploadImage",props:{imgUrl:{type:String,default:function(){return""}}},data:function(){return{image:"https://cdn.surest.cn/uploads/t4zDf6BwrMWhA8sjzeEaWxhYCwsCpt4P",loading:!1,url:"",upload_dir:"",host:"",data:{token:"",key:""}}},created:function(){this.setUploadInfo(),this.image=this.imgUrl},methods:{setUploadInfo:function(){var t=this;Object(i["getQiniuInfo"])().then((function(e){var n=e.data,a=(n.bucket,n.token),r=n.url,i=n.host,u=n.upload_dir;t.url=r,t.data.token=a,t.host=i,t.upload_dir=u,t.data.key=t.upload_dir+Object(o["randomString"])()}))},handleChange:function(t){if(this.data.key=this.upload_dir+Object(o["randomString"])(),"uploading"!==t.file.status){if("done"===t.file.status){this.loading=!1;var e=this.host+t.file.response.key;this.uploadedImage(e)}}else this.loading=!0},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;e||this.$message.error("You can only upload JPG file!");var n=t.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),e&&n},uploadedImage:function(t){this.image=t,this.$emit("update:imgUrl",t)}}},d=u,l=(n("840e"),n("5d22")),s=Object(l["a"])(d,a,r,!1,null,"741e5579",null);e["default"]=s.exports},"840e":function(t,e,n){"use strict";n("3c91")},"91b6":function(t,e,n){"use strict";n.r(e),n.d(e,"getQiniuInfo",(function(){return r}));var a=n("b775");function r(t){return Object(a["default"])({url:"/qiniu",method:"get",data:t})}},d988:function(t,e,n){"use strict";n.r(e),n.d(e,"filterEmpty",(function(){return a})),n.d(e,"getStrFullLength",(function(){return r})),n.d(e,"cutStrByFullLength",(function(){return i})),n.d(e,"randomString",(function(){return o}));n("e3b5"),n("ea94"),n("a037"),n("5b12"),n("9b5f");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter((function(t){return t.tag||t.text&&""!==t.text.trim()}))}var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split("").reduce((function(t,e){var n=e.charCodeAt(0);return n>=0&&n<=128?t+1:t+2}),0)},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=0;return t.split("").reduce((function(t,a){var r=a.charCodeAt(0);return n+=r>=0&&r<=128?1:2,n<=e?t+a:t}),"")},o=function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,a="",r=0;r<t;r++)a+=e.charAt(Math.floor(Math.random()*n));return a}}}]);