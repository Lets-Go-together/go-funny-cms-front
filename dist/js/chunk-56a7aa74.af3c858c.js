(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56a7aa74","chunk-01cd3de6","chunk-0ce24dc1","chunk-c6158766","chunk-7c853649","chunk-112c9256","chunk-2d0be08a","chunk-2d0e4e22","chunk-2d0efc65","chunk-2d22fce3","chunk-2d21f30b"],{"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("25f0"),n("3ca3");var a=n("6b75");function r(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(a["a"])(t,e):void 0}}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("d3b7"),n("e6cf");function a(t,e,n,a,r,i,o){try{var u=t[i](o),l=u.value}catch(c){return void n(c)}u.done?e(l):Promise.resolve(l).then(a,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function u(t){a(o,r,i,u,l,"next",t)}function l(t){a(o,r,i,u,l,"throw",t)}u(void 0)}))}}},2498:function(t,e,n){"use strict";n.r(e);n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("06c5");function r(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(a["a"])(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==r["return"]||r["return"]()}finally{if(u)throw i}}}}var i=[];function o(){return window.tinymce}var u=function(t,e){var n=document.getElementById(t),a=e||function(){};if(!n){var u=document.createElement("script");u.src=t,u.id=t,document.body.appendChild(u),i.push(a);var l="onload"in u?c:s;l(u)}function c(e){e.onload=function(){this.onerror=this.onload=null;var t,n=r(i);try{for(n.s();!(t=n.n()).done;){var a=t.value;a(null,e)}}catch(o){n.e(o)}finally{n.f()}i=null},e.onerror=function(){this.onerror=this.onload=null,a(new Error("Failed to load "+t),e)}}function s(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,n=r(i);try{for(n.s();!(e=n.n()).done;){var a=e.value;a(null,t)}}catch(o){n.e(o)}finally{n.f()}i=null}}}n&&a&&(o()?a(null,n):i.push(a))};e["default"]=u},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n("6b75");function r(t){if(Array.isArray(t))return Object(a["a"])(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=n("06c5");function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return r(t)||i(t)||Object(o["a"])(t)||u()}},"2f11":function(t,e,n){"use strict";n.r(e),n.d(e,"getList",(function(){return r})),n.d(e,"getMailers",(function(){return i})),n.d(e,"add",(function(){return o})),n.d(e,"update",(function(){return u})),n.d(e,"del",(function(){return l}));var a=n("b775");function r(t){return Object(a["default"])({url:"/mail",method:"get",params:t})}function i(t){return Object(a["default"])({url:"/mail/mailer",method:"get",data:t})}function o(t){return Object(a["default"])({url:"/mail/store",method:"post",data:t})}function u(t,e){return Object(a["default"])({url:"/mail/save",method:"put",data:e})}function l(t){return Object(a["default"])({url:"/mail/delete",method:"delete",data:{id:t}})}},"629a9":function(t,e,n){},"634e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.tags,(function(e){return[n("a-tag",{key:e,attrs:{color:"#108ee9",closable:!0},on:{close:function(){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])]})),t.inputVisible?n("a-input",{ref:"input",style:{maxWidth:"160px"},attrs:{type:"text",size:"small",value:t.inputValue},on:{change:t.handleInputChange,blur:t.handleInputConfirm,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}}}):n("a-tag",{staticStyle:{background:"#fff",borderStyle:"dashed",cursor:"pointer"},on:{click:t.showInput}},[n("a-icon",{attrs:{type:"plus"}}),t._v(t._s(t.title))],1)],2)},r=[],i=(n("99af"),n("4de4"),n("c975"),n("2909")),o={props:{vtags:{type:Array,default:function(){return[]}},title:{type:String,default:function(){return"New Tags"}}},data:function(){return{tags:[],inputVisible:!1,inputValue:""}},methods:{handleClose:function(t){var e=this.tags.filter((function(e){return e!==t}));this.tags=e},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handleInputChange:function(t){this.inputValue=t.target.value},handleInputConfirm:function(){var t=this.inputValue,e=this.tags;t&&-1===e.indexOf(t)&&(e=[].concat(Object(i["a"])(e),[t])),Object.assign(this,{tags:e,inputVisible:!1,inputValue:""})}},watch:{vtags:function(t){this.tags=t},tags:function(t){this.$emit("update:vtags",t)}},mounted:function(){this.tags=this.vtags}},u=o,l=n("2877"),c=Object(l["a"])(u,a,r,!1,null,null,null);e["default"]=c.exports},"6b75":function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}n.d(e,"a",(function(){return a}))},8256:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}})},r=[],i=(n("a9e3"),n("b680"),n("9a18")),o=n("ea1b"),u=n("2498"),l=n("c1ab"),c="https://cdn.jsdelivr.net/npm/tinymce@5.7.1/tinymce.min.js",s={name:"Tinymce",props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:800},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},methods:{init:function(){var t=this;Object(u["default"])(c,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],language_url:"https://cdn.surest.cn/plugin/tinymce/zh_CN.js",height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:o["default"],menubar:this.menubar,plugins:i["default"],quickbars_selection_toolbar:"bold italic forecolor | link blockquote quickimage",end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){e.value&&n.setContent(e.value),e.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",n.getContent()),t.$emit("update:value",n.getContent())}))},save_onsavecallback:function(t){e.$emit("save",e.value)},autosave_interval:"5s",setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},images_upload_handler:function(t,e,n){var a=new FormData;a.append("file",t.blob()),Object(l["uploadImage"])(a).then((function(t){e(t.file)})).catch((function(t){n("Server Error")}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()}},d=s,f=(n("9d83"),n("2877")),m=Object(f["a"])(d,a,r,!1,null,"0165abb0",null);e["default"]=m.exports},"91b6":function(t,e,n){"use strict";n.r(e),n.d(e,"getQiniuInfo",(function(){return r}));var a=n("b775");function r(t){return Object(a["default"])({url:"/qiniu",method:"get",data:t})}},"9a18":function(t,e,n){"use strict";n.r(e);var a=["quickbars advlist anchor autolink autosave save code codesample directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template  textpattern visualblocks visualchars wordcount"];e["default"]=a},"9d83":function(t,e,n){"use strict";var a=n("629a9"),r=n.n(a);r.a},c1ab:function(t,e,n){"use strict";n.r(e),n.d(e,"uploadImage",(function(){return i})),n.d(e,"getUplaodSign",(function(){return o}));n("96cf");var a=n("1da1"),r=n("b775");function i(t){return function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var n,a,i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o().then((function(t){var e=t.data;return e}));case 2:return signData=e.sent,n=signData,a=n.uploadUrl,i=n.token,u=n.host,n.dir,t.append("token",i),e.next=7,Object(r["default"])({url:a,method:"post",data:t}).then((function(t){t.hash;var e=t.key;return{file:u+e}}));case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()()}function o(t){return Object(r["default"])({url:"/upload-sign",method:"get",params:t})}},c98e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.drag?n("a-upload-dragger",{attrs:{headers:t.headers,name:"file",multiple:!0,action:t.url},on:{change:t.handleChange}},[n("p",{staticClass:"ant-upload-drag-icon"},[n("a-icon",{attrs:{type:"inbox"}})],1),n("p",{staticClass:"ant-upload-text"},[t._v(t._s(t.uploadText))]),n("p",{staticClass:"ant-upload-hint"},[t._v(t._s(t.uploadHint))])]):n("a-upload",{attrs:{action:t.url,fileList:t.fileList,data:t.data,"before-upload":t.beforeUpload},on:{change:t.handleChange}},[n("a-button",[n("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),t._v(" Upload ")],1)],1)],1)},r=[],i=(n("4de4"),n("caad"),n("d81d"),n("b0c0"),n("2532"),n("ade3")),o=n("2909"),u=n("91b6"),l=(n("d988"),Object(i["a"])({props:{multiple:{type:Boolean,default:function(){return!0}},drag:{type:Boolean,default:function(){return!1}},uploadText:{type:String,default:function(){return"Click or drag file to this area to upload"}},uploadHint:{type:String,default:function(){return"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"}},defaultFileList:{type:Array,default:function(){return[]}}},data:function(){return{headers:{Authorization:"Bearer "+this.getToken()},action:"/api/upload",loading:!1,url:"",upload_dir:"",host:"",data:{token:"",key:""},fileList:[],resourceList:[]}},watch:{},mounted:function(){this.setUploadInfo()},methods:{setUploadInfo:function(){var t=this;Object(u["getQiniuInfo"])().then((function(e){var n=e.data,a=(n.bucket,n.token),r=n.url,i=n.host,o=n.upload_dir;t.url=r,t.data.token=a,t.host=i,t.upload_dir=o}))},getToken:function(){return this.$store.getters.token},beforeUpload:function(t){this.data.key=this.upload_dir+t.name},handleChange:function(t){var e=t.file,n=t.fileList;"uploading"===e.status&&(this.loading=!0),"done"===e.status&&(this.loading=!1,this.resourceList.push({uid:e.uid,url:this.host+e.response.key,filename:e.name})),this.fileList=Object(o["a"])(n)}}},"watch",{fileList:function(t){var e=t.map((function(t){return t.uid})),n=this.resourceList.filter((function(t){return e.includes(t.uid)}));this.$emit("update:defaultFileList",n)}})),c=l,s=n("2877"),d=Object(s["a"])(c,a,r,!1,null,null,null);e["default"]=d.exports},d988:function(t,e,n){"use strict";n.r(e),n.d(e,"filterEmpty",(function(){return a})),n.d(e,"getStrFullLength",(function(){return r})),n.d(e,"cutStrByFullLength",(function(){return i})),n.d(e,"randomString",(function(){return o}));n("4de4"),n("13d5"),n("ac1f"),n("1276"),n("498a");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter((function(t){return t.tag||t.text&&""!==t.text.trim()}))}var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split("").reduce((function(t,e){var n=e.charCodeAt(0);return n>=0&&n<=128?t+1:t+2}),0)},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=0;return t.split("").reduce((function(t,a){var r=a.charCodeAt(0);return n+=r>=0&&r<=128?1:2,n<=e?t+a:t}),"")},o=function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,a="",r=0;r<t;r++)a+=e.charAt(Math.floor(Math.random()*n));return a}},ea1b:function(t,e,n){"use strict";n.r(e);var a=["restoredraft save fontselect fontsizeselect searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"];e["default"]=a},f1f9:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.modelForm,"label-col":{span:2},"wrapper-col":{span:20}}},[t.modelForm.id?n("a-form-model-item",{attrs:{label:"Id",prop:"id"}},[n("a-input",{attrs:{disabled:""},model:{value:t.modelForm.id,callback:function(e){t.$set(t.modelForm,"id",e)},expression:"modelForm.id"}})],1):t._e(),n("a-form-model-item",{attrs:{label:"主题",prop:"subject"}},[n("a-input",{attrs:{"allow-clear":""},model:{value:t.modelForm.subject,callback:function(e){t.$set(t.modelForm,"subject",e)},expression:"modelForm.subject"}})],1),n("a-form-model-item",{attrs:{label:"接受邮箱",prop:"subject"}},[n("Tags",{attrs:{vtags:t.modelForm.emails,title:t.$t("Add Email")},on:{"update:vtags":function(e){return t.$set(t.modelForm,"emails",e)}}})],1),n("a-form-model-item",{attrs:{label:"内容",prop:"content"}},[n("Tinymce",{attrs:{value:t.modelForm.content},on:{"update:value":function(e){return t.$set(t.modelForm,"content",e)}}})],1),n("a-form-model-item",{attrs:{label:"附件",prop:"attachments"}},[n("Upload",{attrs:{defaultFileList:t.modelForm.attachments},on:{"update:defaultFileList":function(e){return t.$set(t.modelForm,"attachments",e)},"update:default-file-list":function(e){return t.$set(t.modelForm,"attachments",e)}}})],1),n("a-form-model-item",{attrs:{label:"发送时间",prop:"send_at"}},[n("a-date-picker",{staticStyle:{width:"200px"},attrs:{format:"YYYY-MM-DD HH:mm:ss",placeholder:"发送时间"},model:{value:t.modelForm.send_at,callback:function(e){t.$set(t.modelForm,"send_at",e)},expression:"modelForm.send_at"}})],1),n("a-form-model-item",{attrs:{label:"配置选择",prop:"mailer"}},[n("a-select",{model:{value:t.modelForm.mailer,callback:function(e){t.$set(t.modelForm,"mailer",e)},expression:"modelForm.mailer"}},t._l(t.mailers,(function(e){return n("a-select-option",{key:e,attrs:{value:"jack"}},[t._v(t._s(e))])})),1)],1),n("a-form-model-item",{attrs:{"wrapper-col":{offset:4}}},[n("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSubmit}},[t._v("确认")]),n("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.$emit("close")}}},[t._v("取消")])],1)],1)},r=[],i=(n("96cf"),n("1da1")),o=n("2f11"),u=n("8256"),l=n("634e"),c=n("c98e"),s={name:"ModuleForm",components:{Tinymce:u["default"],Tags:l["default"],Upload:c["default"]},props:{formData:{type:Object,default:function(){return{}}}},data:function(){return{modelForm:{id:"",subject:"",emails:[],content:"",attachments:[],send_at:void 0,mailer:""},rules:{subject:[{required:!0,message:"请输入主题",tigger:"blur"}],content:[{required:!0,message:"请输入内容",tigger:"change"}],emails:[{required:!0,message:"请输入接受邮箱",tigger:"blur"}],send_at:[{required:!0,message:"请选择发送时间"}]},loading:!1,mailers:[]}},methods:{onSubmit:function(){var t=this;this.$refs.ruleForm.validate((function(e){e&&t.submit()}))},submit:function(){var t,e=this,n=this.modelForm,a=Object.assign({},n,{send_at:n.send_at.format("YYYY-MM-DD HH:mm:ss")});t=a.id?Object(o["update"])(a.id,a):Object(o["add"])(a),this.loading=!0,t.then((function(t){e.$message.success("Success"),e.loading=!1,e.$emit("success")})).catch((function(){e.loading=!1}))}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.formData,t.modelForm,Object.assign(t.modelForm,n,{status:2==n.status,hidden:1==n.hidden});case 2:case"end":return e.stop()}}),e)})))()}},d=s,f=n("2877"),m=Object(f["a"])(d,a,r,!1,null,null,null);e["default"]=m.exports}}]);