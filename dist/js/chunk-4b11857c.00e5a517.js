(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b11857c"],{"60dc":function(t,a,e){"use strict";e("fbc7")},"6d9b":function(t,a,e){},ab11:function(t,a,e){"use strict";e("6d9b")},f717:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("page-header-wrapper",[e("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1}},[e("div",{attrs:{slot:"extra"},slot:"extra"},[e("div",{staticClass:"operate"},[e("a-button",{staticClass:"addAdmin",attrs:{type:"primary"},on:{click:function(a){t.visible=!0}}},[t._v(t._s(t.$t("add")))])],1),e("a-radio-group",{model:{value:t.status,callback:function(a){t.status=a},expression:"status"}},[e("a-radio-button",{attrs:{value:"all"}},[t._v("全部")]),e("a-radio-button",{attrs:{value:"processing"}},[t._v("进行中")]),e("a-radio-button",{attrs:{value:"waiting"}},[t._v("等待中")])],1),e("a-input-search",{staticStyle:{"margin-left":"16px",width:"272px"}})],1),e("a-table",{attrs:{"data-source":t.data,columns:t.columns,bordered:""},scopedSlots:t._u([{key:"account",fn:function(a,r){return e("a",{},[e("a-avatar",{attrs:{src:r.avatar}}),t._v(" "+t._s(a)+" ")],1)}}])})],1),e("a-modal",{attrs:{title:t.title,width:"40%",visible:t.visible,"confirm-loading":t.confirmLoading,footer:null},on:{cancel:function(a){t.visible=!1}}},[t.visible?e("module-form",{attrs:{formData:t.form},on:{"update:formData":function(a){t.form=a},"update:form-data":function(a){t.form=a},addSubmit:t.addSubmit}}):t._e()],1)],1)},o=[],n=e("b775");function i(t){return Object(n["b"])({url:"/admin/list",method:"get",data:t})}var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.form,"label-col":{span:6},"wrapper-col":{span:16}}},[e("a-form-model-item",{attrs:{label:"Account",prop:"account"}},[e("a-input",{model:{value:t.form.account,callback:function(a){t.$set(t.form,"account",a)},expression:"form.account"}})],1),e("a-form-model-item",{attrs:{label:"Avatar",prop:"avatar"}},[e("upload-image")],1),e("a-form-model-item",{attrs:{label:"Email",prop:"email"}},[e("a-input",{model:{value:t.form.email,callback:function(a){t.$set(t.form,"email",a)},expression:"form.email"}})],1),e("a-form-model-item",{attrs:{label:"Phone",prop:"phone"}},[e("a-input",{model:{value:t.form.phone,callback:function(a){t.$set(t.form,"phone",a)},expression:"form.phone"}})],1),e("a-form-model-item",{attrs:{label:"Password",prop:"password"}},[e("a-input",{model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}})],1),e("a-form-model-item",{attrs:{label:"Confirm Password",prop:"confirm_password"}},[e("a-input",{model:{value:t.form.confirm_password,callback:function(a){t.$set(t.form,"confirm_password",a)},expression:"form.confirm_password"}})],1),e("a-form-model-item",{attrs:{"wrapper-col":{span:16,offset:6}}},[e("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 确认 ")]),e("a-button",{staticStyle:{"margin-left":"10px"}},[t._v(" 取消 ")])],1)],1)},l=[];function d(t,a,e){return a?/^1[3456789]\d{9}$/.test(a)?e():e(new Error("手机号码不符合规范")):e(new Error("Please input the Phone"))}function u(t,a,e){return a&&(a.length>12||a.length<6)?e(new Error("密码限定6-12个字符串")):e()}var c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-upload",{staticClass:"image-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,action:t.url,data:t.data,"before-upload":t.beforeUpload},on:{change:t.handleChange}},[t.image?e("img",{attrs:{src:t.image,alt:"image"}}):e("div",[e("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1)])],1)},m=[];function p(t){return Object(n["b"])({url:"admin/qiniu",method:"get",data:t})}e("3f4b"),e("4538"),e("6a22"),e("5f89"),e("270d");var f=function(t){t=t||32;for(var a="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",e=a.length,r="",o=0;o<t;o++)r+=a.charAt(Math.floor(Math.random()*e));return r},g={name:"UploadImage",data:function(){return{image:"https://cdn.surest.cn/uploads/t4zDf6BwrMWhA8sjzeEaWxhYCwsCpt4P",loading:!1,url:"",upload_dir:"",host:"",data:{token:"",key:""}}},created:function(){this.setUploadInfo()},methods:{setUploadInfo:function(){var t=this;p().then((function(a){var e=a.data,r=(e.bucket,e.token),o=e.url,n=e.host,i=e.upload_dir;t.url=o,t.data.token=r,t.host=n,t.data.key=i+f()}))},handleChange:function(t){if("uploading"!==t.file.status){if("done"===t.file.status){this.loading=!1;var a=this.host+t.file.response.key;this.uploadedImage(a)}}else this.loading=!0},beforeUpload:function(t){var a="image/jpeg"===t.type||"image/png"===t.type;a||this.$message.error("You can only upload JPG file!");var e=t.size/1024/1024<2;return e||this.$message.error("Image must smaller than 2MB!"),a&&e},uploadedImage:function(t){this.image=t}}},h=g,b=(e("60dc"),e("5d22")),v=Object(b["a"])(h,c,m,!1,null,"60d1dc9a",null),w=v.exports,_={name:"ModuleForm",components:{UploadImage:w},props:["formData"],data:function(){return{form:{},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],avatar:[{required:!1,message:"Please upload avatar",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱"}],phone:[{required:!0,message:"请输入电话号码",trigger:"blur"},{validator:d,trigger:"blur"}],password:[{validator:u,trigger:"blur"}],confirm_password:[{validator:u,trigger:"blur"},{validator:this.validateConfirmPassword,trigger:"blur"}]},loading:!1}},methods:{validateConfirmPassword:function(t,a,e){var r=this.form.password;return r!==a?e(new Error("两次输入密码不一致")):e()},onSubmit:function(){var t=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;t.$emit("addSubmit",t.form)}))}}},k=_,x=Object(b["a"])(k,s,l,!1,null,null,null),y=x.exports,S=[{title:"账号",key:"account",dataIndex:"account",scopedSlots:{customRender:"account"}},{title:"简介",key:"description",dataIndex:"description"},{title:"Email",key:"email",dataIndex:"email"},{title:"Phone",key:"phone",dataIndex:"phone"},{title:"创建时间",key:"created_at",dataIndex:"created_at"}],C={name:"AdminList",components:{ModuleForm:y},data:function(){var t=this;return{data:[],status:"all",columns:S,page:1,pagination:{onChange:function(a){t.page=a,t.getList()},showSizeChanger:!0,showQuickJumper:!0,pageSize:20,total:50},title:"新增",visible:!1,confirmLoading:!1,form:{}}},created:function(){this.getList()},methods:{getList:function(){var t=this,a={page:this.page,pageSize:this.pageSize};i(a).then((function(a){var e=a.data;t.data=e.list}))},add:function(){this.visible=!0},addSubmit:function(t){},edit:function(t){}}},$=C,I=(e("ab11"),Object(b["a"])($,r,o,!1,null,"66435c35",null));a["default"]=I.exports},fbc7:function(t,a,e){}}]);