(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07785130","chunk-2d23799e","chunk-2d2102b9","chunk-2d0bdf79"],{"2df7":function(t,e,n){"use strict";n.r(e);var a=n("5530");e["default"]={data:function(){return{pagination:{pageSize:10,page:1,total:0},pageParams:{pageSize:10,page:1}}},methods:{handleTableChange:function(t,e,n){var i=Object(a["a"])({},this.pagination);i.current=t.current,this.pagination=i,this.filters=Object.assign(this.filters,{pageSize:t.pageSize,page:t.current,sortField:n.field,sortOrder:n.order}),this.getList()}}}},"519d":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"filters"},[n("a-form",{attrs:{form:t.filters,layout:"inline"}},[n("a-form-item",{attrs:{label:""}},[n("a-input",{attrs:{placeholder:"邮件名称"},model:{value:t.filters.keyword,callback:function(e){t.$set(t.filters,"keyword",e)},expression:"filters.keyword"}})],1),n("a-form-item",{attrs:{label:""}},[n("a-button-group",[n("a-button",{attrs:{type:"primary",icon:"search",loading:t.tableLoading},on:{click:function(e){return t.getList()}}},[t._v("查询")]),n("a-button",{attrs:{type:"primary",icon:"add",loading:t.tableLoading},on:{click:function(e){return t.add()}}},[t._v("添加")])],1)],1)],1)],1),n("a-divider",{attrs:{dashed:""}}),n("div",{staticClass:"tableList"},[n("a-table",{attrs:{rowKey:"id",loading:t.tableLoading,columns:t.columns,"data-source":t.data,pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"status",fn:function(e){return n("span",{},[1==e?n("a-tag",{attrs:{color:"#108ee9"}},[t._v("待发送")]):t._e(),2==e?n("a-tag",{attrs:{color:"#87d068"}},[t._v("发送中")]):t._e(),3==e?n("a-tag",{attrs:{color:"#87d068"}},[t._v("发送成功")]):t._e(),4==e?n("a-tag",{attrs:{color:"#f50"}},[t._v("发送失败")]):t._e()],1)}},{key:"emails",fn:function(e){return n("span",{},t._l(e,(function(e){return n("a-tag",{key:e},[t._v(t._s(e))])})),1)}},{key:"action",fn:function(e){return n("span",{},[n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[t._v("更多"),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a-popconfirm",{attrs:{title:t.$t("confirm_delete"),"ok-text":"Yes","cancel-text":"No"},on:{confirm:function(n){return t.del(e.id)}}},[n("a",{attrs:{href:"#"}},[t._v(t._s(t.$t("delete")))])])],1),n("a-menu-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(n){return t.showContent(e)}}},[t._v("查看邮件")])])],1)],1)],1)}}])})],1),n("a-drawer",{attrs:{title:t.formModue.title,width:"80%",visible:t.formModue.visible,"confirm-loading":t.formModue.loadding},on:{close:function(e){t.formModue.visible=!1}}},[t.formModue.visible?n("module-form",{attrs:{formData:t.formModue.formData},on:{"update:formData":function(e){return t.$set(t.formModue,"formData",e)},"update:form-data":function(e){return t.$set(t.formModue,"formData",e)},success:t.success,close:function(e){t.formModue.visible=!1}}}):t._e()],1),n("Content",{attrs:{title:t.title,visible:t.visible,content:t.content},on:{"update:visible":function(e){t.visible=e}}})],1)},i=[],o=n("2f11"),s=n("2df7"),r=n("f1f9"),l=n("fc8c"),d=n("b76d"),u={mixins:[s["default"],d["default"]],components:{ModuleForm:r["default"],Content:l["default"]},data:function(){return{filters:{keyword:""},columns:[{title:"Id",dataIndex:"id",key:"id"},{title:"Email",dataIndex:"email",key:"email"},{title:"主题",dataIndex:"subject",key:"subject"},{title:"发送状态",scopedSlots:{customRender:"status"},dataIndex:"status",key:"status"},{title:"发送时间",dataIndex:"send_at",key:"send_at"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},fixed:"right"}],data:[],tableLoading:!1,formModue:{title:"添加",visible:!1,formData:{},loadding:!1}}},methods:{getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({status:[1,2,3,4]},e,this.pageParams,this.filters),this.tableLoading=!0,Object(o["getList"])(e).then((function(e){var n=e.data;t.data=n.list,t.tableLoading=!1,t.pagination.total=n.total})).catch((function(){t.tableLoading=!1}))},edit:function(t){t=JSON.parse(JSON.stringify(t)),this.$set(this,"formModue",{title:"编辑",visible:!0,formData:t})},del:function(t){var e=this;Object(o["del"])(t).then((function(t){e.$message.success(t.message),e.getList()}))},success:function(){this.formModue.visible=!1,this.getList()}},mounted:function(){this.getList()}},c=u,f=n("2877"),m=Object(f["a"])(c,a,i,!1,null,null,null);e["default"]=m.exports},b76d:function(t,e,n){"use strict";n.r(e),e["default"]={data:function(){return{visible:!1,content:"",title:""}},methods:{showContent:function(t){this.title=t.subject,this.content=t.content,this.visible=!0},add:function(){this.$set(this,"formModue",{title:"添加",visible:!0,formData:{}})}}}},fc8c:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-modal",{attrs:{title:t.title,width:"85%",cancelText:!1},on:{ok:t.handleOk},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{domProps:{innerHTML:t._s(t.content)}})])],1)},i=[],o={props:{content:{type:String,default:function(){return""}},visible:{type:Boolean,default:function(){return!1}},title:{type:String,default:function(){return""}}},data:function(){return{show:!1}},methods:{handleOk:function(){this.$emit("update:visible",!1)}},watch:{visible:function(t){this.show=t},show:function(t){this.$emit("update:visible",t)}}},s=o,r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);e["default"]=l.exports}}]);