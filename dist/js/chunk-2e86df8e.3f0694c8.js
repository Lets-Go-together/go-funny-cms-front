(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e86df8e"],{1253:function(t,a,e){},"8a99":function(t,a,e){"use strict";e("1253")},ae19:function(t,a,e){},bdd2:function(t,a,e){"use strict";e("ae19")},f717:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("page-header-wrapper",[e("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1}},[e("div",{staticClass:"operate"},[e("a-row",{staticClass:"filter",attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("a-col",{attrs:{span:12}},[t._v("列表")]),e("a-col",{attrs:{span:12}},[e("a-form",{staticClass:"form",attrs:{layout:"inline"}},[e("a-form-item",[e("a-input",{attrs:{placeholder:"search admin name","enter-button":""}})],1),e("a-form-item",[e("a-button",{staticClass:"addAdmin",attrs:{type:"primary",loading:t.tableLoading,icon:"search"},on:{click:function(a){return t.getList()}}},[t._v(t._s(t.$t("search")))])],1)],1)],1)],1),e("a-button",{staticClass:"button",staticStyle:{width:"100%"},attrs:{type:"default"},on:{click:function(a){t.formModue.visible=!0}}},[t._v(t._s(t.$t("add")))])],1),e("a-list",{attrs:{"item-layout":"horizontal","data-source":t.data},scopedSlots:t._u([{key:"renderItem",fn:function(a){return e("a-list-item",{},[e("a-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("a-col",{attrs:{span:6}},[e("a-list-item-meta",{attrs:{description:"描述: "+a.description}},[e("a",{attrs:{slot:"title",href:"javascript:;"},on:{click:t.show},slot:"title"},[t._v(t._s(a.account))]),e("a-avatar",{attrs:{slot:"avatar",shape:"square",src:a.avatar,size:64},slot:"avatar"})],1)],1),e("a-col",{staticStyle:{},attrs:{span:6}},[e("div",{staticClass:"created_at"},[t._v(" 创建时间 "),e("div",[t._v(t._s(a.created_at))])])]),e("a-col",{attrs:{span:2}},[e("div",{staticClass:"operation"},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.edit(a)}}},[t._v(t._s(t.$t("edit")))]),e("a-dropdown",[e("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[t._v("更多"),e("a-icon",{attrs:{type:"down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[e("a",{attrs:{href:"javascript:;"}},[t._v("删除")])])],1)],1)],1)])],1)],1)}}])})],1),e("a-modal",{attrs:{title:t.formModue.title,width:"40%",visible:t.formModue.visible,"confirm-loading":t.confirmLoading,footer:null},on:{cancel:function(a){t.formModue.visible=!1}}},[t.formModue.visible?e("module-form",{attrs:{formData:t.formModue.formData},on:{"update:formData":function(a){return t.$set(t.formModue,"formData",a)},"update:form-data":function(a){return t.$set(t.formModue,"formData",a)},addSubmit:t.addSubmit}}):t._e()],1)],1)},r=[],i=e("b775");function n(t){return Object(i["b"])({url:"/admin",method:"get",data:t})}function s(){return Object(i["b"])({url:"/admin",method:"post",params:params})}function l(t,a){return Object(i["b"])({url:"/admin/".concat(t),method:"put",data:a})}var d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.modelForm,"label-col":{span:6},"wrapper-col":{span:16}}},[e("a-form-model-item",{attrs:{label:"Account",prop:"account"}},[e("a-input",{model:{value:t.modelForm.account,callback:function(a){t.$set(t.modelForm,"account",a)},expression:"modelForm.account"}})],1),e("a-form-model-item",{attrs:{label:"Avatar",prop:"avatar"}},[e("upload-image",{attrs:{imgUrl:t.modelForm.avatar},on:{"update:imgUrl":function(a){return t.$set(t.modelForm,"avatar",a)},"update:img-url":function(a){return t.$set(t.modelForm,"avatar",a)}}})],1),e("a-form-model-item",{attrs:{label:"Email",prop:"email"}},[e("a-input",{model:{value:t.modelForm.email,callback:function(a){t.$set(t.modelForm,"email",a)},expression:"modelForm.email"}})],1),e("a-form-model-item",{attrs:{label:"Phone",prop:"phone"}},[e("a-input",{model:{value:t.modelForm.phone,callback:function(a){t.$set(t.modelForm,"phone",a)},expression:"modelForm.phone"}})],1),e("a-form-model-item",{attrs:{label:"Password",prop:"password"}},[e("a-input",{attrs:{type:"password"},model:{value:t.modelForm.password,callback:function(a){t.$set(t.modelForm,"password",a)},expression:"modelForm.password"}})],1),e("a-form-model-item",{attrs:{label:"Confirm Password",prop:"confirm_password"}},[e("a-input",{attrs:{type:"password"},model:{value:t.modelForm.confirm_password,callback:function(a){t.$set(t.modelForm,"confirm_password",a)},expression:"modelForm.confirm_password"}})],1),e("a-form-model-item",{attrs:{label:"Desccription",prop:"description"}},[e("a-input",{attrs:{type:"textarea"},model:{value:t.modelForm.description,callback:function(a){t.$set(t.modelForm,"description",a)},expression:"modelForm.description"}})],1),e("a-form-model-item",{attrs:{"wrapper-col":{span:16,offset:6}}},[e("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 确认 ")]),e("a-button",{staticStyle:{"margin-left":"10px"}},[t._v(" 取消 ")])],1)],1)},m=[];function u(t,a,e){return a?/^1[3456789]\d{9}$/.test(a)?e():e(new Error("手机号码不符合规范")):e(new Error("Please input the Phone"))}function c(t,a,e){return a&&(a.length>12||a.length<6)?e(new Error("密码限定6-12个字符串")):e()}var p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-upload",{staticClass:"image-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,action:t.url,data:t.data,"before-upload":t.beforeUpload},on:{change:t.handleChange}},[t.image?e("img",{attrs:{src:t.image,alt:"image"}}):e("div",[e("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1)])],1)},f=[];function g(t){return Object(i["b"])({url:"/qiniu",method:"get",data:t})}e("3f4b"),e("4538"),e("6a22"),e("5f89"),e("270d");var h=function(t){t=t||32;for(var a="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",e=a.length,o="",r=0;r<t;r++)o+=a.charAt(Math.floor(Math.random()*e));return o},b={name:"UploadImage",props:{imgUrl:{type:String,default:function(){return""}}},data:function(){return{image:"https://cdn.surest.cn/uploads/t4zDf6BwrMWhA8sjzeEaWxhYCwsCpt4P",loading:!1,url:"",upload_dir:"",host:"",data:{token:"",key:""}}},created:function(){this.setUploadInfo(),this.image=this.imgUrl},methods:{setUploadInfo:function(){var t=this;g().then((function(a){var e=a.data,o=(e.bucket,e.token),r=e.url,i=e.host,n=e.upload_dir;t.url=r,t.data.token=o,t.host=i,t.data.key=n+h()}))},handleChange:function(t){if("uploading"!==t.file.status){if("done"===t.file.status){this.loading=!1;var a=this.host+t.file.response.key;this.uploadedImage(a)}}else this.loading=!0},beforeUpload:function(t){var a="image/jpeg"===t.type||"image/png"===t.type;a||this.$message.error("You can only upload JPG file!");var e=t.size/1024/1024<2;return e||this.$message.error("Image must smaller than 2MB!"),a&&e},uploadedImage:function(t){this.image=t}}},v=b,w=(e("bdd2"),e("5d22")),y=Object(w["a"])(v,p,f,!1,null,"05ae3656",null),_=y.exports,F={name:"ModuleForm",components:{UploadImage:_},props:{formData:{type:Object,default:function(){return{}}}},data:function(){var t=this,a=function(a,e,o){var r=t.modelForm.password;return 0==r.length?o():r!==e?o(new Error("两次输入密码不一致")):o()};return{modelForm:{},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],avatar:[{required:!1,message:"Please upload avatar",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱"}],phone:[{required:!0,message:"请输入电话号码",trigger:"blur"},{validator:u,trigger:"blur"}],password:[{validator:c,trigger:"blur"}],confirm_password:[{validator:c,trigger:"blur"},{validator:a,trigger:"blur"}],description:[{required:!0,message:"请输入管理员的描述",trigger:"blur"}]},loading:!1}},methods:{onSubmit:function(){var t=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;t.$emit("addSubmit",t.modelForm)}))}},created:function(){this.modelForm=this.formData}},k=F,$=Object(w["a"])(k,d,m,!1,null,null,null),M=$.exports,C={name:"AdminList",components:{ModuleForm:M},data:function(){var t=this;return{data:[],status:"all",page:1,pagination:{onChange:function(a){t.page=a,t.getList()},showSizeChanger:!0,showQuickJumper:!0,pageSize:20,total:50},formModue:{title:"添加",visible:!1,formData:{}},confirmLoading:!1,tableLoading:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this,a={page:this.page,pageSize:this.pageSize};this.tableLoading=!0,n(a).then((function(a){var e=a.data;t.data=e.list,t.tableLoading=!1}))},add:function(){this.visible=!0},addSubmit:function(t){var a,e=this;a=t.id?l(t.id,t):s(t),a.then((function(t){e.formModue.visible=!1,e.$message.success(t.message)}))},edit:function(t){this.$set(this,"formModue",{title:"编辑",visible:!0,formData:t})},show:function(){this.formModue={title:"编辑",visible:!0}}}},x=C,S=(e("8a99"),Object(w["a"])(x,o,r,!1,null,"5daf3ac7",null));a["default"]=S.exports}}]);