(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a493ffe","chunk-4258b6fc","chunk-2d0b6c50","chunk-2d0bdf79"],{"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("3ca3");var a=r("6b75");function n(e,t){if(e){if("string"===typeof e)return Object(a["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a["a"])(e,t):void 0}}},1892:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{ref:"ruleForm",attrs:{rules:e.rules,model:e.modelForm,"label-col":{span:4},"wrapper-col":{span:16}}},[e.modelForm.id?r("a-form-model-item",{attrs:{label:"Id",prop:"id"}},[r("a-input",{attrs:{disabled:""},model:{value:e.modelForm.id,callback:function(t){e.$set(e.modelForm,"id",t)},expression:"modelForm.id"}})],1):e._e(),r("a-form-model-item",{attrs:{label:"父节点",prop:"name"}},[r("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.menus,replaceFields:e.replaceFields,placeholder:"Please select"},model:{value:e.modelForm.p_id,callback:function(t){e.$set(e.modelForm,"p_id",t)},expression:"modelForm.p_id"}})],1),r("a-form-model-item",{attrs:{label:"菜单名称",prop:"name"}},[r("a-input",{attrs:{"allow-clear":""},model:{value:e.modelForm.name,callback:function(t){e.$set(e.modelForm,"name",t)},expression:"modelForm.name"}})],1),r("a-form-model-item",{attrs:{label:"Icon",prop:"icon"}},[r("a-input",{attrs:{type:"url","allow-clear":""},model:{value:e.modelForm.icon,callback:function(t){e.$set(e.modelForm,"icon",t)},expression:"modelForm.icon"}})],1),r("a-form-model-item",{attrs:{label:"排序",prop:"weight"}},[r("a-input-number",{attrs:{"allow-clear":""},model:{value:e.modelForm.weight,callback:function(t){e.$set(e.modelForm,"weight",t)},expression:"modelForm.weight"}})],1),r("a-form-model-item",{attrs:{label:"组件",prop:"component"}},[r("a-input",{attrs:{"allow-clear":""},model:{value:e.modelForm.component,callback:function(t){e.$set(e.modelForm,"component",t)},expression:"modelForm.component"}})],1),r("a-form-model-item",{attrs:{label:"描述",prop:"description"}},[r("a-textarea",{attrs:{type:"url","allow-clear":""},model:{value:e.modelForm.description,callback:function(t){e.$set(e.modelForm,"description",t)},expression:"modelForm.description"}})],1),r("a-form-model-item",{attrs:{label:"Url",prop:"url"}},[r("a-input",{attrs:{type:"url","allow-clear":""},model:{value:e.modelForm.url,callback:function(t){e.$set(e.modelForm,"url",t)},expression:"modelForm.url"}})],1),r("a-form-model-item",{attrs:{label:"是否禁用",prop:"status"}},[r("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否","default-checked":"","allow-clear":""},model:{value:e.modelForm.status,callback:function(t){e.$set(e.modelForm,"status",t)},expression:"modelForm.status"}})],1),r("a-form-model-item",{attrs:{label:"是否隐藏",prop:"status"}},[r("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否","default-checked":"","allow-clear":""},model:{value:e.modelForm.hidden,callback:function(t){e.$set(e.modelForm,"hidden",t)},expression:"modelForm.hidden"}})],1),r("a-form-model-item",{attrs:{"wrapper-col":{offset:4}}},[r("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.onSubmit}},[e._v("确认")]),r("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消")])],1)],1)},n=[],o=(r("99af"),r("2909")),i=(r("96cf"),r("1da1")),l=r("1f27"),s={name:"ModuleForm",props:{formData:{type:Object,default:function(){return{}}}},data:function(){return{modelForm:{},rules:{p_id:[{required:!0,message:"请选择父节点",tigger:"blur"}],name:[{required:!0,message:"请输入菜单名称",tigger:"blur"}],icon:[{required:!0,message:"请输入icon",tigger:"blur"}],description:[{required:!0,message:"请选择描述内容",tigger:"blur"}]},loading:!1,availableMethods:["GET","POST","PUT","DELETE","ANY"],menus:[],replaceFields:{children:"children",title:"name",key:"id",value:"id"}}},methods:{onSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){if(e.modelForm.p_id==e.modelForm.id)return void e.$message.error("父节点设置错误: 不允许设置自己");e.loading=!0;var r,a=JSON.parse(JSON.stringify(e.modelForm));Object.assign(a,{status:a.status?2:1,hidden:a.hidden?1:2}),r=a.id?Object(l["update"])(a):Object(l["add"])(a),r.then((function(t){e.$message.success("Success"),e.loading=!1,e.$emit("success")})).catch((function(){e.loading=!1}))}}))},getMenuTree:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["getMenuTree"])().then((function(t){var r,a=t.data;e.menus=(r=[]).concat.apply(r,[{id:1,name:"根节点",p_id:0}].concat(Object(o["a"])(a)))}));case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMenuTree();case 2:e.modelForm=Object.assign(e.formData,{status:2==e.formData.status,hidden:1==e.formData.hidden});case 3:case"end":return t.stop()}}),t)})))()}},d=s,c=r("2877"),u=Object(c["a"])(d,a,n,!1,null,null,null);t["default"]=u.exports},"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("d3b7"),r("e6cf");function a(e,t,r,a,n,o,i){try{var l=e[o](i),s=l.value}catch(d){return void r(d)}l.done?t(s):Promise.resolve(s).then(a,n)}function n(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){a(i,n,o,l,s,"next",e)}function s(e){a(i,n,o,l,s,"throw",e)}l(void 0)}))}}},"1f27":function(e,t,r){"use strict";r.r(t),r.d(t,"getList",(function(){return n})),r.d(t,"add",(function(){return o})),r.d(t,"update",(function(){return i})),r.d(t,"del",(function(){return l})),r.d(t,"getMenuTree",(function(){return s}));var a=r("b775");function n(e){return Object(a["default"])({url:"/menu",method:"get",params:e})}function o(e){return Object(a["default"])({url:"/menu/store",method:"post",data:e})}function i(e){return Object(a["default"])({url:"/menu/save",method:"put",data:e})}function l(e){return Object(a["default"])({url:"/menu/delete",method:"delete",data:{id:e}})}function s(){return Object(a["default"])({url:"/menu/tree",method:"get"})}},2909:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("6b75");function n(e){if(Array.isArray(e))return Object(a["a"])(e)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var i=r("06c5");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return n(e)||o(e)||Object(i["a"])(e)||l()}},"2df7":function(e,t,r){"use strict";r.r(t);var a=r("5530");t["default"]={data:function(){return{pagination:{pageSize:10,page:1,total:0},pageParams:{pageSize:10,page:1}}},methods:{handleTableChange:function(e,t,r){var n=Object(a["a"])({},this.pagination);n.current=e.current,this.pagination=n,this.filters=Object.assign(this.filters,{pageSize:e.pageSize,page:e.current,sortField:r.field,sortOrder:r.order}),this.getList()}}}},"6b75":function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}r.d(t,"a",(function(){return a}))},c965:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page-header-wrapper",[r("a-card",[r("div",{staticClass:"filters"},[r("a-form",{attrs:{form:e.filters,layout:"inline"}},[r("a-form-item",{attrs:{label:""}},[r("a-input",{attrs:{placeholder:"菜单名称"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}})],1),r("a-form-item",{attrs:{label:""}},[r("a-button-group",[r("a-button",{attrs:{type:"primary",icon:"search",loading:e.tableLoading},on:{click:function(t){return e.getList()}}},[e._v("查询")]),r("a-button",{attrs:{type:"primary",icon:"add",loading:e.tableLoading},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1)],1)],1),r("a-divider",{attrs:{dashed:""}}),r("div",{staticClass:"tableList"},[r("a-table",{attrs:{rowKey:"id",loading:e.tableLoading,columns:e.columns,"data-source":e.data,pagination:!1},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"icon",fn:function(e){return r("span",{},[r("a-icon",{attrs:{type:e}})],1)}},{key:"method",fn:function(t){return r("span",{},[r("a-tag",{attrs:{color:"#2db7f5"}},[e._v(e._s(t))])],1)}},{key:"status",fn:function(t){return r("span",{},[1==t?r("a-tag",{attrs:{color:"#87d068"}},[e._v("正常")]):r("a-tag",{attrs:{color:"#f50"}},[e._v("禁用")])],1)}},{key:"hidden",fn:function(t){return r("span",{},[1==t?r("a-tag",{attrs:{color:"#87d068"}},[e._v("是")]):r("a-tag",{attrs:{color:"#f50"}},[e._v("否")])],1)}},{key:"action",fn:function(t){return r("span",{},[r("a-button",{attrs:{type:"link"},on:{click:function(r){return e.edit(t)}}},[e._v(e._s(e.$t("edit")))]),r("a-dropdown",[r("a",{staticClass:"ant-dropdown-link",on:{click:function(e){return e.preventDefault()}}},[e._v("更多"),r("a-icon",{attrs:{type:"down"}})],1),r("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[r("a-menu-item",[r("a-popconfirm",{attrs:{title:e.$t("confirm_delete"),"ok-text":"Yes","cancel-text":"No"},on:{confirm:function(r){return e.del(t.id)}}},[r("a",{attrs:{href:"#"}},[e._v(e._s(e.$t("delete")))])])],1)],1)],1)],1)}}])})],1)],1),r("a-drawer",{attrs:{title:e.formModue.title,width:"800px",visible:e.formModue.visible,"confirm-loading":e.formModue.loadding},on:{close:function(t){e.formModue.visible=!1}}},[e.formModue.visible?r("module-form",{attrs:{formData:e.formModue.formData},on:{"update:formData":function(t){return e.$set(e.formModue,"formData",t)},"update:form-data":function(t){return e.$set(e.formModue,"formData",t)},success:e.success,close:function(t){e.formModue.visible=!1}}}):e._e()],1)],1)},n=[],o=r("1f27"),i=r("2df7"),l=r("1892"),s={mixins:[i["default"]],components:{ModuleForm:l["default"]},data:function(){return{filters:{keyword:""},columns:[{title:"Id",dataIndex:"id",key:"id"},{title:"菜单名称",dataIndex:"name",key:"name"},{title:"icon",scopedSlots:{customRender:"icon"},dataIndex:"icon",key:"icon"},{title:"url",dataIndex:"url",key:"url"},{title:"位置",dataIndex:"weight",key:"weight"},{title:"是否隐藏",dataIndex:"hidden",scopedSlots:{customRender:"hidden"},key:"hidden"},{title:"组件",dataIndex:"component",key:"component"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},key:"status"},{title:"创建时间",dataIndex:"created_at",key:"created_at"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},fixed:"right"}],data:[],tableLoading:!1,formModue:{title:"添加",visible:!1,formData:{},loadding:!1}}},methods:{getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign(t,this.pageParams,this.filters),this.tableLoading=!0,Object(o["getList"])(t).then((function(t){var r=t.data;e.data=r,e.tableLoading=!1})).catch((function(){e.tableLoading=!1}))},edit:function(e){e=JSON.parse(JSON.stringify(e)),this.$set(this,"formModue",{title:"编辑",visible:!0,formData:e})},del:function(e){var t=this;Object(o["del"])(e).then((function(e){t.$message.success(e.message),t.getList()}))},add:function(){this.$set(this,"formModue",{title:"添加",visible:!0,formData:{}})},success:function(){this.formModue.visible=!1,this.getList()}},mounted:function(){this.getList()}},d=s,c=r("2877"),u=Object(c["a"])(d,a,n,!1,null,null,null);t["default"]=u.exports}}]);